(this["webpackJsonpattestation-deplacement"]=this["webpackJsonpattestation-deplacement"]||[]).push([[0],{216:function(e,t,a){e.exports=a(353)},221:function(e,t,a){},232:function(e,t,a){},353:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),s=a(11),l=a.n(s),c=(a(221),a(10)),i=a.n(c),u=a(169),m=a(22),p=a(36),d=a(9),h=a(355),f=a(356),b=a(359),w=a(358),g=a(357),v=a(90),y=a(56),x=a(214),E=a(170),k=a(55),D=a(102),T=a.n(D);a(231),a(232),a(233);T.a.locale("fr");var j;!function(e){e.name="name",e.birthDay="birthDay",e.address="address",e.town="town",e.postalCode="postalCode",e.purpose="purpose",e.signature="signature"}(j||(j={}));var O,z=k.a().shape((r={},Object(d.a)(r,j.name,k.b().required()),Object(d.a)(r,j.birthDay,k.b().required()),Object(d.a)(r,j.address,k.b().required()),Object(d.a)(r,j.town,k.b().required()),Object(d.a)(r,j.postalCode,k.b().required()),Object(d.a)(r,j.purpose,k.b().required()),r));!function(e){e.pro="pro",e.grocery="grocery",e.health="health",e.family="family",e.sport="sport"}(O||(O={}));var N=[{label:"Pro",value:O.pro},{label:"Achats de premi\xe8re n\xe9cessit\xe9",value:O.grocery},{label:"Sant\xe9",value:O.health},{label:"Famille",value:O.family},{label:"Sport",value:O.sport}],S=h.a.Option,C=f.a.Title;var q=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,r,n,o,s,l,c,u,m,p,d,h,f,b,w;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.birthDay,n=t.address,o=t.town,s=t.postalCode,l=t.purpose,c=t.signature,u=10,m=T()(r).format("DD/MM/YYYY"),e.next=5,fetch("template.pdf").then((function(e){return e.arrayBuffer()}));case 5:return p=e.sent,e.next=8,E.PDFDocument.load(p);case 8:d=e.sent,(h=d.getPages()[0]).drawText(a,{x:135,y:622,size:u}),h.drawText(m,{x:135,y:593,size:u}),h.drawText(n,{x:135,y:559,size:u}),h.drawText("".concat(s," ").concat(o),{x:135,y:544,size:u}),e.t0=l,e.next=e.t0===O.pro?17:e.t0===O.grocery?19:e.t0===O.health?21:e.t0===O.family?23:e.t0===O.sport?25:27;break;case 17:return h.drawText("x",{x:51,y:425,size:17}),e.abrupt("break",27);case 19:return h.drawText("x",{x:51,y:350,size:17}),e.abrupt("break",27);case 21:return h.drawText("x",{x:51,y:305,size:17}),e.abrupt("break",27);case 23:return h.drawText("x",{x:51,y:274,size:17}),e.abrupt("break",27);case 25:return h.drawText("x",{x:51,y:229,size:17}),e.abrupt("break",27);case 27:return h.drawText(o,{x:375,y:140,size:u}),h.drawText(String((new Date).getDate()),{x:478,y:140,size:u}),h.drawText(String((new Date).getMonth()+1).padStart(2,"0"),{x:502,y:140,size:10}),e.next=32,d.embedPng(c);case 32:return f=e.sent,b=f.scale(1/(f.width/150)),h.drawImage(f,{x:h.getWidth()-b.width-50,y:30,width:b.width,height:b.height}),e.next=37,d.save();case 37:return w=e.sent,e.abrupt("return",new Blob([w],{type:"application/pdf"}));case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){var a=document.createElement("a"),r=URL.createObjectURL(e);a.href=r,a.download=t,a.click()},Y=function(){var e=Object(n.useState)(void 0),t=Object(p.a)(e,2),a=t[0],r=t[1],s=Object(y.b)({validationSchema:z}),l=s.handleSubmit,c=s.errors,d=s.control,f=function(){var e=Object(m.a)(i.a.mark((function e(t){var r,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="attestation.pdf",n=(null===a||void 0===a?void 0:a.toDataURL())||"",e.next=4,q(Object(u.a)({},t,{signature:n}));case 4:o=e.sent,A(o,r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=document.querySelector("canvas");e?r(new x.a(e)):console.log("no canvas")}),[]),o.a.createElement("div",{className:"App"},o.a.createElement(C,{className:"title"},"G\xe9n\xe9rateur d'attestation de d\xe9placement"),o.a.createElement(b.a,{className:"alert",type:"warning",message:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement("a",{className:"uppercase",href:"https://www.liberation.fr/checknews/2020/03/18/confinement-peut-on-montrer-l-attestation-de-deplacement-sur-son-telephone_1782180",target:"_blank",rel:"noopener noreferrer"},"L'attestation d\xe9mat\xe9rialis\xe9e n'est plus autoris\xe9e, seule la version papier est accept\xe9e (imprim\xe9e ou mansucrite).")),o.a.createElement("br",null),o.a.createElement("p",null,"Vous pouvez trouver l'attestation officielle"," ",o.a.createElement("a",{href:"https://www.interieur.gouv.fr/Actualites/L-actu-du-Ministere/Attestation-de-deplacement-derogatoire-et-justificatif-de-deplacement-professionnel",target:"_blank",rel:"noopener noreferrer"},"ici.")))}),o.a.createElement(b.a,{className:"alert",type:"info",message:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"Petition pour pouvoir utliser une attestation d\xe9materialis\xe9e"," ",o.a.createElement("a",{href:"https://www.change.org/p/emmanuel-macron-pour-d%C3%A9mat%C3%A9rialiser-les-attestations-de-d%C3%A9placement-72e66b58-254e-42ad-9d50-41896a921102",target:"_blank",rel:"noopener noreferrer"},"ici")))}),o.a.createElement("form",{className:"Form",onSubmit:l(f)},Object.keys(c).length>0&&o.a.createElement("span",{className:"form-error-label"},"Tous les champs sont obligatoires !"),o.a.createElement(y.a,{as:o.a.createElement(w.a,{placeholder:"Nom"}),control:d,name:j.name}),o.a.createElement(y.a,{as:o.a.createElement(g.a,{placeholder:"Date de naissance",name:j.birthDay,format:"DD/MM/YYYY"}),control:d,name:j.birthDay}),o.a.createElement(y.a,{as:o.a.createElement(w.a,{placeholder:"Adresse"}),control:d,name:j.address}),o.a.createElement(y.a,{as:o.a.createElement(w.a,{placeholder:"Ville"}),control:d,name:j.town}),o.a.createElement(y.a,{as:o.a.createElement(w.a,{placeholder:"Code Postal"}),control:d,name:j.postalCode}),o.a.createElement(y.a,{as:o.a.createElement(h.a,{placeholder:"Motif"},N.map((function(e,t){return o.a.createElement(S,{key:t,value:e.value},e.label)}))),control:d,name:"purpose"}),o.a.createElement("span",{className:"label"},"Signature:"),o.a.createElement("canvas",null),o.a.createElement("a",{className:"link clear-pad",onClick:function(){null===a||void 0===a||a.clear()}},"Effacer signature"),o.a.createElement(v.a,{type:"primary",htmlType:"submit"},"G\xe9n\xe9rer PDF")),o.a.createElement("span",{className:"footerText"},"Bon courage pendant le confinement, et sortez couvert \ud83d\ude37"," "),o.a.createElement("span",{className:"footerText warning"},"Les donn\xe9es personnelles ne sont pas collect\xe9es (c'est \xe0 dire qu'aucune des informations ci-dessus n'est envoy\xe9e \xe0 aucun moment vers un serveur, tout reste uniquement sur votre t\xe9l\xe9phone)"),o.a.createElement("a",{className:"link",href:"https://github.com/gmpetrov/generateur-attestation-deplacement",target:"_blank",rel:"noopener noreferrer"},"code source"),o.a.createElement("a",{className:"link",href:"mailto:georges@cool.ovh"},"contact"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[216,1,2]]]);
//# sourceMappingURL=main.b75b0d38.chunk.js.map